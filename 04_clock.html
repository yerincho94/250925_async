<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>시계 만들기</title>
  </head>
  <body>
    <section id="clock"></section>
    <section>
      <input id="timerSecond" type="number" /> 초 타이머
      <section>
        <button id="startBtn">시작</button>
        <button id="pauseBtn">일시정지</button>
        <button id="restartBtn">재시작</button>
      </section>
      <span id="second"></span> 초 남았습니다.
    </section>

    <script>
      const clock = document.querySelector("#clock");
      setInterval(() => {
        // clock.textContent = new Date();
        const date = new Date();
        // HH:mm:ss -> 2자리수 표기법에 익숙함
        // clock.textContent = `${date.getHours()}:${date.getMinutes()}:${date.getSeconds()}`;
        // "".padStart(2, "0");
        const hour = date.getHours().toString().padStart(2, "0"); // 비어있으면 0으로 채워줭
        const minute = date.getMinutes().toString().padStart(2, "0");
        const second = date.getSeconds().toString().padStart(2, "0");

        clock.textContent = `${hour}:${minute}:${second}`;
      }, 1000);

      //초 타이머
      let timerSecond = 0; //남은 초를 공용으로 쓴다
      let timerId = 0; //공용으로 사용한다.
      document.querySelector("#startBtn").addEventListener("click", () => {
        clearInterval(timerId); //중지하고 시작을 함
        //input에 있는 값을 불러오고,
        // let timerSecond = Number(document.querySelector("#timerSecond").value);
        timerSecond = Number(document.querySelector("#timerSecond").value);
        console.log(timerSecond);
        //span태그 지정해서 -> #second
        const second = document.querySelector("#second");
        second.textContent = timerSecond; //최초 값을 주입한 다음에,
        // const timerId = setInterval(() => {
        timerId = setInterval(() => {
          //특정 타이머 id
          timerSecond--;
          second.textContent = timerSecond;
          if (timerSecond <= 0) {
            //0에 도달하면
            clearInterval(timerId); //clear가 없으면 -초까지 떨어짐 (진행하던 타이머 중지)
          }
        }, 1000);
        console.log("timerId: ", timerId);
      });

      //일시정지 pauseBtn
      document.querySelector("#pauseBtn").addEventListener("click", () => {
        clearInterval(timerId); //interval만 멈춘다.
        //dom을 통함 화면 변경도 멈추고, 데이터 변경도 멈춘 것.
      });
      //재시작 restartBtn
      document.querySelector("#restartBtn").addEventListener("click", () => {
        //기존에 새롭게 데이터를 배정해주는 로직은 실행하지 않고, 화면과 데이터 업데이트 로직만 interval에 주입.
        timerId = setInterval(() => {
          //특정 타이머 id
          timerSecond--;
          second.textContent = timerSecond;
          if (timerSecond <= 0) {
            //0에 도달하면
            clearInterval(timerId); //clear가 없으면 -초까지 떨어짐 (진행하던 타이머 중지)
          }
        }, 1000);
        console.log("timerId1: ", timerId);
      });
    </script>
  </body>
</html>
